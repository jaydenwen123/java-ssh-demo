<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>validRegister.html</title>
    <meta http-equiv="keywords" content="keyword1,keyword2,keyword3"/>
    <meta http-equiv="description" content="this is my page"/>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    
    <!--<link rel="stylesheet" type="text/css" href="./styles.css">-->
	<style type="text/css">
		.style1{
			width: 100px;
		}
		
		.sp{
			font-size: 12px;
			color: red;
			 font-family: monospace;
		}
	
	</style>
	<script type="text/javascript" language="javascript">
		<!--
			function test(obj){
				span1.innerText="";
				span2.innerText="";
				span3.innerText="";
				span4.innerText="";
				span5.innerText="";
				span6.innerText="";
				if(obj.username.value.length<4 || obj.username.value.length>6){
				
					span1.innerText="用户名的长度在4位到6位之间";
					return false;
				}
				
				if(obj.password.value.length<3){
					span2.innerText="密码长度不能小于3位";
					return false;
				}
				
				if(obj.password.value!=obj.passwordAgain.value){
					span3.innerText="两次输入的密码不一致";
					return false;
				}
				
				//利用正则表达式进行邮箱格式的验证
				var emailReg=/^[a-zA-Z0-9]+@([a-z0-9]+\.)+(com|cn)$/gi;
				var emailValue=obj.email.value;
				if(!emailReg.test(emailValue)){
						span4.innerText="邮箱格式不正确";
						return false;
				}
				//利用正则表达式进行电话号码和身份证的验证
				
				var phoneReg=/^1(3|4|5)(\d){9}/gi;
				var phoneValue=obj.phone.value;
				if(!phoneReg.test(phoneValue)){
					span5.innerText="电话号码的长度不是11位，或者不是有效的电话号码";
					return false;
				}
				
			var validCode=validTable.rows[0].cells[0].innerText;
			if(obj.validcode.value!=validCode.toLocaleLowerCase() || obj.validcode.value!=validCode){
				span6.innerText="验证码输入不正确,请重新输入";
				return false;
			}
				
			}
			
			function createCode(obj){
				var str="abcdefghjijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
				str=str.split("");
				var str1=str[Math.round(Math.random()*62)];
				var str2=str[Math.round(Math.random()*62)];
				var str3=str[Math.round(Math.random()*62)];
				var str4=str[Math.round(Math.random()*62)];
					//window.alert(str1);
				obj.rows[0].cells[0].innerText=str1+str2+str3+str4;
				//window.alert(obj.rows[0].cells[0].innerText.toLocaleLowerCase());
			}
		//-->
	</script>
  </head>
  <body>
  
  <form action="###" onsubmit="return test(this)">
  <table border="1px">
  	<caption>注册新用户</caption>
  <tr>
  	<td>用户名</td><td width="300px"><input type="text" name="username" class="style1" /><span id="span1" class="sp"></span></td>
  </tr>
  <tr><td>密码</td><td><input type="password" name="password" class="style1"/><span id="span2" class="sp"></span></td></tr>
  <tr><td>确认密码</td><td><input type="password" name="passwordAgain" class="style1"/><span id="span3" class="sp"></span></td></tr>
  <tr><td>邮箱</td><td><input type="text" name="email" class="style1"/><span id="span4" class="sp"></span></td></tr>
  <tr><td>电话号码</td><td><input type="text" name="phone" class="style1"/><span id="span5" class="sp"></span></td></tr>
  <tr><td>验证码</td><td><input type="text" name="validcode" class="style1"/>
  	<span  style="display:inline-table;">
  	
  		<table  id="validTable" border="1px" onclick="createCode(this)">
  			<tr ><td style="letter-spacing: 3px;">1234</td></tr>
  		</table>
  	</span>
  	<span id="span6" class="sp"></span>
  </td></tr>
  <tr><td><input type="submit" value="注册"/></td><td><input type="reset" value="取消"/></td></tr>
	</table>
	</form>
	
  </body>
</html>
